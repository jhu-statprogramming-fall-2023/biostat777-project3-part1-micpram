<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a time series plot of total refugees by year • P3</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Oswald-0.4.8/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Create a time series plot of total refugees by year"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">P3</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/example.html">Example Analysis</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create a time series plot of total refugees by year</h1>
      
    </div>


<div class="section level2">
<h2 id="example-analysis">Example Analysis<a class="anchor" aria-label="anchor" href="#example-analysis"></a></h2>
<div class="section level3">
<h3 id="refugee-population-data-from-tidytuesday">Refugee Population Data from TidyTuesday<a class="anchor" aria-label="anchor" href="#refugee-population-data-from-tidytuesday"></a></h3>
<p><code>{r setup, include=FALSE} knitr::opts_chunk$set(echo = TRUE)</code></p>
<p><code>{r, include=FALSE} library(Project2) library(dplyr) library(ggplot2) library(lubridate) library(tidyr) library(purrr)</code></p>
<p><code>{r, include=FALSE} ## List of exported functions that are in the package exists("fn_cos") exists("fn_sin") exists("sample_mean") exists("sample_sd") exists("CI1") exists("make_ci_class") exists("print") exists("CI2")</code></p>
<div class="section level4">
<h4 id="r-package-project2-includes-basic-functions-to-calculate-cosine-sine-sample-mean-sample-standard-deviation-95-confidence-interval-of-the-mean-and-s3-class-95-confidence-interval-in-order-to-utilize-these-functions-from-the-project2-package-one-must-create-a-vector-and-label-it-x">R Package, Project2, includes basic functions to calculate cosine, sine, sample mean, sample standard deviation, 95% confidence interval of the mean, and S3 class 95% confidence interval. In order to utilize these functions from the Project2 package, one must create a vector and label it “x”.<a class="anchor" aria-label="anchor" href="#r-package-project2-includes-basic-functions-to-calculate-cosine-sine-sample-mean-sample-standard-deviation-95-confidence-interval-of-the-mean-and-s3-class-95-confidence-interval-in-order-to-utilize-these-functions-from-the-project2-package-one-must-create-a-vector-and-label-it-x"></a></h4>
</div>
<div class="section level4">
<h4 id="question-what-is-the-95-confidence-interval-and-mean-number-of-refugees-across-the-us--canada-from-2019-to-2022">Question: What is the 95% confidence interval and mean number of refugees across the US &amp; Canada from 2019 to 2022?<a class="anchor" aria-label="anchor" href="#question-what-is-the-95-confidence-interval-and-mean-number-of-refugees-across-the-us--canada-from-2019-to-2022"></a></h4>
<p>```{r} ## Data is from TidyTuesday and focuses on refugee population and country of asylum data. library(tidyverse) library(refugees) populations &lt;- refugees::population populations &lt;- filter(populations, year &gt;= 2019) head(populations)</p>
<pre><code>
### Data Dictionary

# `population.csv`

|variable          |class     |description       |
|:-----------------|:---------|:-----------------|
|year              |double    |The year.              |
|coo_name          |character |Country of origin name.        |
|coo               |character |Country of origin UNHCR code.   |
|coo_iso           |character |Country of origin ISO code.  |
|coa_name          |character |Country of asylum name.    |
|coa               |character |Country of asylum UNHCR code.  |
|coa_iso           |character |Country of asylum ISO code.    |
|refugees          |double    |The number of refugees.   |
|asylum_seekers    |double    |The number of asylum-seekers.  |
|returned_refugees |double    |The number of returned refugees. |
|idps              |double    |The number of internally displaced persons.     |
|returned_idps     |double    |The number of returned internally displaced persons.  |
|stateless         |double    |The number of stateless persons.  |
|ooc               |double    |The number of others of concern to UNHCR.   |
|oip               |double    |The number of other people in need of international protection.     |
|hst               |double    |The number of host community members.     |


```{r, message=FALSE}
summary &lt;- populations %&gt;%
  group_by(coo_name) %&gt;%
  summarise(Sample_Mean = mean(refugees, na.rm = TRUE))

top_countries_mean &lt;- summary %&gt;%
  arrange(desc(Sample_Mean)) %&gt;%
  head(10) 

top_countries_mean</code></pre>
<p>```{r} plot &lt;- ggplot(top_countries_mean, aes(x = coo_name, y = Sample_Mean)) + geom_bar(stat = “identity”, position = “dodge”, alpha = 0.8) + labs( title = “Top-10 Mean Number of Refugees by Country of Origin”, subtitle = “Data from 2019-2022”, x = “Country”, y = “Mean Number of Refugees”, fill = “Year” ) + theme_light() + coord_flip() + facet_grid()</p>
<p>plot</p>
<pre><code>
#### Time series plot of total refugees by year

```{r}
subset &lt;- populations %&gt;%
  filter(coa_name == c("United States of America", "Canada")) 

ggplot(subset, aes(x = coa_name, y = refugees, fill=factor(year))) +
  geom_bar(stat = "identity", position = "dodge", alpha = 0.8) +
  labs(
    title = "Total Number of Refugees by Year Per Country",
    x = "Country of Asylyum",
    y = "Total Refugees") +  
    theme_light() +
    coord_flip() +
    facet_grid()
</code></pre>
<p>```{r} # Aggregate the total number of refugees by year total_refugees_by_year &lt;- populations %&gt;% group_by(year) %&gt;% summarise(Total_Refugees = sum(refugees, na.rm = TRUE)) %&gt;% ungroup()</p>
</div>
</div>
</div>
<div id="create-a-time-series-plot-of-total-refugees-by-year" class="section level1">

<p>ggplot(total_refugees_by_year, aes(x = year, y = Total_Refugees)) + geom_line() + labs( title = “Total Number of Refugees Over Time”, x = “Year”, y = “Total Refugees”) + theme_light() + facet_grid()</p>
<pre><code>
```{r}
#$ Calculate mean refugees for each year
mean_refugees_by_year &lt;- populations %&gt;%
  group_by(year) %&gt;%
  summarise(mean_refugees = mean(refugees, na.rm = TRUE))

## Extract a vector of mean refugees for each year
mean_refugees_vector &lt;- map_dbl(unique(populations$year), ~ mean_refugees_by_year$mean_refugees[mean_refugees_by_year$year == .x])

## Mean refugees for each year
mean_refugees_vector

## Calculate the overall mean of refugees
overall_mean_refugees &lt;- mean(populations$refugees, na.rm = TRUE)

## Subtract the overall mean from each yearly mean using map2()
results &lt;- map2(mean_refugees_by_year$mean_refugees, overall_mean_refugees, `-`)

## Difference between refugee mean per year and overall mean
results
</code></pre>
<p><code>{r} ## Calculating sample mean and standard deviation in order to calculate the 95% confidence interval ## x = Vector of your choosing made of any combination of numerical values. In this case, it's the winner's marathon times. x &lt;- (population$refugees) ## Calculate the sample mean or average of values in the vector x sample_mean(x) ## Calculate the sample standard deviation sample_sd(x) ## Calculate the confidence interval of the mean with consideration to marginal errors. Function produces the lower and upper bound of the mean. CI1(x)</code></p>
<p><code>{r} ## S3 class to produce a 95% confidence interval with lower and upper bounds. ## Used in order to track the function as rnorm produces values at random using the mean and standard deviation from the winning marathon times in hours ## Produces n values at random with a normal distribution to account for all data points in the winners dataset set.seed(111) x &lt;- rnorm(n = nrow(population), mean = mean(population$refugees), sd = sd(population$refugees)) ## Constructor function of the confidence interval S3 class ## Prints each of the returns of the make_ci_class along with the respective value  obj &lt;- make_ci_class(x) print(obj) # Modified confidence interval calculation with consideration to the S3 confidence interval class CI2(obj)</code></p>
<div class="section level5">
<h5 id="summary-overall-there-has-been-a-dramatic-increase-in-the-total-number-of-refugees-across-the-globe-and-especially-between-2019-and-2022-additionally-when-comparing-the-amount-of-refugees-seeking-asylyum-between-the-us-and-canada-the-us-clearly-accepts-more-refugees-than-canada">Summary: Overall, there has been a dramatic increase in the total number of refugees across the globe, and especially between 2019 and 2022. Additionally, when comparing the amount of refugees seeking asylyum between the US and Canada, the US clearly accepts more refugees than Canada.<a class="anchor" aria-label="anchor" href="#summary-overall-there-has-been-a-dramatic-increase-in-the-total-number-of-refugees-across-the-globe-and-especially-between-2019-and-2022-additionally-when-comparing-the-amount-of-refugees-seeking-asylyum-between-the-us-and-canada-the-us-clearly-accepts-more-refugees-than-canada"></a></h5>
</div>
<div class="section level4">
<h4 id="packages--functions-used">Packages &amp; Functions Used<a class="anchor" aria-label="anchor" href="#packages--functions-used"></a></h4>
<table class="table"><thead><tr class="header"><th align="left">Package</th>
<th align="left">Function</th>
</tr></thead><tbody><tr class="odd"><td align="left">DPLYR</td>
<td align="left">%&gt;%</td>
</tr><tr class="even"><td align="left">DPLYR</td>
<td align="left">summarise</td>
</tr><tr class="odd"><td align="left">DPLYR</td>
<td align="left">group_by</td>
</tr><tr class="even"><td align="left">DPLYR</td>
<td align="left">mean</td>
</tr><tr class="odd"><td align="left">DPLYR</td>
<td align="left">filter</td>
</tr><tr class="even"><td align="left">PURR</td>
<td align="left">map_dbl</td>
</tr><tr class="odd"><td align="left">PURR</td>
<td align="left">map2</td>
</tr><tr class="even"><td align="left">TIDYR</td>
<td align="left">tibble</td>
</tr><tr class="odd"><td align="left">TIDYR</td>
<td align="left">count</td>
</tr><tr class="even"><td align="left">GGPLOT2</td>
<td align="left">geom_bar</td>
</tr><tr class="odd"><td align="left">GGPLOT2</td>
<td align="left">geom_line</td>
</tr><tr class="even"><td align="left">GGPLOT2</td>
<td align="left">geom_point</td>
</tr><tr class="odd"><td align="left">GGPLOT2</td>
<td align="left">facet_grid</td>
</tr></tbody></table></div>
</div>


  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Website designed by Michael Ramirez</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

